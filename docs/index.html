
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../img/ORB-logo-ring.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Documentation - Orb Dynamic Edge Observability</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41778111-9","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
Try Orb now for free in under 10 minutes at <a href="https://orb.live">orb.live community SaaS site</a> (no CC required). Follow instructions <a href="/docs/#getting-started">here</a>.

          </div>
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Orb Dynamic Edge Observability" class="md-header__button md-logo" aria-label="Orb Dynamic Edge Observability" data-md-component="logo">
      
  <img src="../img/ORB-logo-ring.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Orb Dynamic Edge Observability
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ns1labs/orb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../about/" class="md-tabs__link">
      About
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../install/" class="md-tabs__link">
      Installation
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Documentation
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../contact/" class="md-tabs__link">
      Community
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Orb Dynamic Edge Observability" class="md-nav__button md-logo" aria-label="Orb Dynamic Edge Observability" data-md-component="logo">
      
  <img src="../img/ORB-logo-ring.png" alt="logo">

    </a>
    Orb Dynamic Edge Observability
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ns1labs/orb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Documentation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-a-new-account" class="md-nav__link">
    Register a new account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-agent" class="md-nav__link">
    Create an Agent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-agent-group" class="md-nav__link">
    Create an Agent Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-sink" class="md-nav__link">
    Create a Sink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-policy" class="md-nav__link">
    Create a Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-dataset" class="md-nav__link">
    Create a Dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-orb-health" class="md-nav__link">
    Check Orb Health
  </a>
  
    <nav class="md-nav" aria-label="Check Orb Health">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-status" class="md-nav__link">
    Agent Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#policies-status" class="md-nav__link">
    Policies Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datasets-validity" class="md-nav__link">
    Datasets Validity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinks-status" class="md-nav__link">
    Sinks Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualize-and-alert-on-your-metrics" class="md-nav__link">
    Visualize and alert on your metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-orb-agent" class="md-nav__link">
    Running Orb Agent
  </a>
  
    <nav class="md-nav" aria-label="Running Orb Agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-credentials" class="md-nav__link">
    Agent credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-provisioning-commands" class="md-nav__link">
    Sample provisioning commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-files" class="md-nav__link">
    Configuration files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-auto-provisioning-setup" class="md-nav__link">
    Advanced auto-provisioning setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-api-docs" class="md-nav__link">
    Working with API Docs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contact/" class="md-nav__link">
        Community
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-a-new-account" class="md-nav__link">
    Register a new account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-agent" class="md-nav__link">
    Create an Agent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-agent-group" class="md-nav__link">
    Create an Agent Group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-sink" class="md-nav__link">
    Create a Sink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-policy" class="md-nav__link">
    Create a Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-dataset" class="md-nav__link">
    Create a Dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-orb-health" class="md-nav__link">
    Check Orb Health
  </a>
  
    <nav class="md-nav" aria-label="Check Orb Health">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-status" class="md-nav__link">
    Agent Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#policies-status" class="md-nav__link">
    Policies Status
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datasets-validity" class="md-nav__link">
    Datasets Validity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sinks-status" class="md-nav__link">
    Sinks Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualize-and-alert-on-your-metrics" class="md-nav__link">
    Visualize and alert on your metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-orb-agent" class="md-nav__link">
    Running Orb Agent
  </a>
  
    <nav class="md-nav" aria-label="Running Orb Agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agent-credentials" class="md-nav__link">
    Agent credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-provisioning-commands" class="md-nav__link">
    Sample provisioning commands
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-files" class="md-nav__link">
    Configuration files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-auto-provisioning-setup" class="md-nav__link">
    Advanced auto-provisioning setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-api-docs" class="md-nav__link">
    Working with API Docs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/ns1labs/orb/edit/main/docs/docs.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h1>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>Follow the steps below after logging in to your Orb Portal to get an agent up and running.</p>
<h3 id="register-a-new-account">Register a new account<a class="headerlink" href="#register-a-new-account" title="Permanent link">&para;</a></h3>
<p><img alt="" src="../img/register.png" /></p>
<p>After registering, you should see the home page with a welcome message.</p>
<p><img alt="" src="../img/welcome_to_orb.png" /></p>
<h3 id="create-an-agent">Create an Agent<a class="headerlink" href="#create-an-agent" title="Permanent link">&para;</a></h3>
<p>You create an agent for each node you want to monitor. Agents are organized by tags. Each agent has a set of corresponding credentials used during provisioning. You may also <a href="#advanced-auto-provisioning-setup">provision agents directly at the edge</a> instead of through the UI.</p>
<ol>
<li>
<p>Navigate to <strong>Agents</strong>, and then click <strong>New Agent</strong>.
<img alt="" src="../img/new_agent.png" /></p>
</li>
<li>
<p>Fill in an <em>Agent Name</em> and click <strong>Next</strong>.
<img alt="" src="../img/agent_name.png" /></p>
</li>
<li>
<p>Optionally, fill in <em>Key</em> and <em>Value</em> tags, then click the <strong>+</strong> on the right side of the menu. These tags represent the way you will assign the agent to an agent group. Reasonable tags might be "location", "region", "pop", "type", etc. 
<img alt="" src="../img/new_agent_tag_add.png" /></p>
</li>
<li>
<p>You should see an icon with your key and value tags appear above the <em>Key</em> and <em>Value</em> textboxes. Click <strong>Next</strong>.
<img alt="" src="../img/new_agent_tag.png" /></p>
</li>
<li>
<p>Click <strong>Save</strong> to confirm your agent’s name and tags.<br />
<img alt="" src="../img/new_agent_tag_save.png" /></p>
</li>
<li>
<p>Your agent credentials should appear. Copy the <em>Provisioning Command</em>. This command contains all the information you need to run the Docker container with the given credentials you now have for the agent.
<img alt="" src="../img/provisioning_command.png" /></p>
</li>
<li>
<p>Paste the <em>Provisioning Command</em> into your terminal (optionally edit "mock" to be real) and run the command. See <a href="/docs/#running-orb-agent">Running Orb Agent</a> for more details.</p>
</li>
<li>
<p>Close out of the <em>Agent Credentials</em> menu. Refresh the <em>Agents List</em> in UI. The agent you just created should display an <em>Online</em> status.
<img alt="" src="../img/agent_online.png" /></p>
</li>
<li>
<p>Optionally, click the agent's name to view the <em>Agent View</em> screen. This screen will contain more information as you add the agent to an agent group and add corresponding policies and datasets.
<img alt="" src="../img/agent_view_agent.png" /></p>
</li>
</ol>
<h3 id="create-an-agent-group">Create an Agent Group<a class="headerlink" href="#create-an-agent-group" title="Permanent link">&para;</a></h3>
<p>Agents are organized into agent groups based on key-value tag matching.</p>
<ol>
<li>
<p>Navigate to <strong>Agent Groups</strong>, and then click <strong>New Agent Group</strong>.
<img alt="" src="../img/new_agent_group.png" /></p>
</li>
<li>
<p>Fill in an <em>Agent Group Name</em> and click <strong>Next</strong>.
<img alt="" src="../img/new_agent_group_name.png" /></p>
</li>
<li>
<p>Fill in the <em>Key</em> and <em>Value</em> tags, <strong>which need to match the tags of the corresponding Agent</strong>, and click the <strong>+</strong> on the right side of the menu. You should see an icon with your key and value tags appear above the <em>Key</em> and <em>Value</em> textboxes.
<img alt="" src="../img/new_agent_group_name_plus.png" /></p>
</li>
<li>
<p>Click <strong>Next</strong>. You should see a message about the number of agents matching. Then click <strong>Save</strong>.
<img alt="" src="../img/new_agent_group_name_next.png" />
   💡 By clicking in <strong>EXPAND</strong> you can see the agents that are matching with the group (This is optional).
<img alt="" src="../img/new_agent_group_expand_matching.png" /></p>
</li>
<li>
<p>View the newly created group in the <em>Agent Groups</em> list.
<img alt="" src="../img/agent_group_list.png" /></p>
</li>
<li>
<p>Click the number in the <em>Agents</em> column to view the matching agents.
<img alt="" src="../img/matching_agent.png" /></p>
</li>
</ol>
<h3 id="create-a-sink">Create a Sink<a class="headerlink" href="#create-a-sink" title="Permanent link">&para;</a></h3>
<p>A sink is a location to send the metrics collected from the agents. The current version supports Prometheus, and future versions will support more options. You can use a private Prometheus instance or use a free <a href="https://grafana.com/products/cloud/">Grafana Cloud</a> account as a sink.</p>
<ol>
<li>
<p>Navigate to <strong>Sink Management</strong>, and then click <strong>New Sink</strong>.
<img alt="" src="../img/new_sink.png" /></p>
</li>
<li>
<p>Fill in a sink name and click <strong>Next</strong>.
<img alt="" src="../img/new_sink_test.png" /></p>
</li>
<li>
<p>Fill in your sink destination details. This includes the host/username/password from your Prometheus <code>remote_write</code> configuration.
<img alt="" src="../img/sink_destination.png" /></p>
</li>
<li>
<p>Optionally, add sink tags by filling in the <em>Key</em> and <em>Value</em> fields. Click <strong>+</strong> after each key-value pair, and then click <strong>Next</strong>.
<img alt="" src="../img/sink_tags.png" /></p>
</li>
<li>
<p>Review and confirm your sink details and click <strong>Save</strong>.
<img alt="" src="../img/sink_save.png" /></p>
</li>
<li>
<p>View your newly created sink in the <em>All Sinks</em> list.
<img alt="" src="../img/new_sink_list.png" /></p>
</li>
</ol>
<h3 id="create-a-policy">Create a Policy<a class="headerlink" href="#create-a-policy" title="Permanent link">&para;</a></h3>
<p>Policies tell agents which metrics to collect and how to collect them.</p>
<ol>
<li>
<p>Navigate to <strong>Policy Management</strong>, and then click <strong>New Policy</strong>.
<img alt="" src="../img/new_policy.png" /></p>
</li>
<li>
<p>Fill in a policy name and (optionally) a description. The policy name needs to be unique and cannot contain spaces (use underscores or dashes instead). Then click <strong>Next</strong>.
<img alt="" src="../img/policy_name.png" /></p>
</li>
<li>
<p>Select the <em>Tap</em> (input stream) to analyze. In this example, we use “default_pcap” which is the default for Packet Capture. All other options are advanced and can be left as is. Click <strong>Next</strong>.
<img alt="" src="../img/policy_tap_setup.png" /></p>
</li>
<li>
<p>Click <strong>Add Handler</strong> to add a <em>Stream Handler</em> to the policy, which specifies how to analyze the input stream selected in the previous step.
<img alt="" src="../img/policy_data_handlers.png" /></p>
</li>
<li>
<p>Add a <em>Handler Label</em> for each handler you add. In this example, we want to analyze DNS traffic, so we select the “dns” handler. The only required field here is the <em>Handler Label</em>, which is automatically generated for you (handler_dns_1 in this case).
<img alt="" src="../img/policy_handler_config.png" /></p>
</li>
<li>
<p>Enter any customization variables. In this example, we customize the analysis by analyzing only domain names ending in ".ua" or ".ru". This is done with the filter labeled "Include Only QNames With Suffix." We input a comma delimited list of suffixes, so enter ".ua,.ru". Click <strong>Save</strong> after entering any customization to save this Handler.
<img alt="" src="../img/policy_handler_config2.png" /></p>
</li>
<li>
<p>You should see your new handler label on the screen. Optionally, add more handlers. Click <strong>Save</strong> to save the policy.
<img alt="" src="../img/policy_save.png" /></p>
</li>
</ol>
<h3 id="create-a-dataset">Create a Dataset<a class="headerlink" href="#create-a-dataset" title="Permanent link">&para;</a></h3>
<p>Datasets essentially connect all of the previous pieces. By creating and defining a dataset, you send a specific <em>policy</em> to a specific <em>agent group</em> and establish a <em>sink</em> to receive the resulting metrics which allows you to visualize and action on the data.</p>
<ol>
<li>
<p>Navigate to the <strong>Policy</strong> you would like to create a Dataset for, then click on New Dataset.
<img alt="" src="../img/new_dataset_from_policy.png" /></p>
</li>
<li>
<p>Select the Agent Group to send the policy to, the Sink(s) you would like to send the resulting metrics to, and give the Dataset a name.
<img alt="" src="../img/new_dataset_modal.png" /></p>
</li>
<li>
<p>As soon as you click <strong>Save</strong>, the policy will be sent in real time to the Agents in the Agent Group and begin running.</p>
</li>
<li>
<p>Verify your dataset is active via the <em>Agent View</em> screen. Navigate to <strong>Agents</strong> and click on the name of the agent that matches the group you selected in creating the dataset. The <em>Agent View</em> screen displays. Under the <em>Active Policies/Datasets</em> category, click the <strong>Policy</strong> drop-down (which should accompany a "running" status), and your <strong>Dataset</strong> should display.
<img alt="" src="../img/agent_view_dataset.png" /></p>
</li>
</ol>
<h3 id="check-orb-health">Check Orb Health<a class="headerlink" href="#check-orb-health" title="Permanent link">&para;</a></h3>
<p>Orb objects have status variables whose functions are to help you understand the health of your system. Below is a guide to the correct interpretations of each status.</p>
<h4 id="agent-status">Agent Status<a class="headerlink" href="#agent-status" title="Permanent link">&para;</a></h4>
<p>There are 4 expected status for agents: <code>new</code>, <code>online</code>, <code>offline</code> and <code>stale</code></p>
<p><img alt="" src="../img/agents_status.png" /></p>
<p>These status are related to the agent's last activity (heartbeat):</p>
<p>🟣 <code>new</code> means that the agent never sent a heartbeat (i.e. has never connected to the control plane)</p>
<p>🟢 <code>online</code> means that the agent is sending heartbeats right now (is running and healthy).</p>
<p>⚪ <code>offline</code> means that the control plane received a heartbeat saying that the agent is going offline.</p>
<p>🟠 <code>stale</code> means that the control plane has not received a heartbeat for 5 minutes (without having received a heartbeat stating that it would go offline)</p>
<h4 id="policies-status">Policies Status<a class="headerlink" href="#policies-status" title="Permanent link">&para;</a></h4>
<p>The status of each policy can be seen on the preview page of an agent to which it is applied</p>
<p>The policy will be:</p>
<p><span style="color:green">running</span> if agent policy is being managed from the control plane (policy-related metrics are being requested/scraped by this agent)</p>
<p><span style="color:red">failed_to_apply</span> if an error prevents the policy from being applied by the agent. By clicking on the expand icon you can see the cause of the error</p>
<p><span style="color:grey">offline</span> if the policy was stopped by agent request</p>
<p><img alt="" src="../img/policies_running_and_failed.png" /></p>
<p><img alt="" src="../img/policy_offline.png" /></p>
<h4 id="datasets-validity">Datasets Validity<a class="headerlink" href="#datasets-validity" title="Permanent link">&para;</a></h4>
<p>Once created a dataset can only be <code>valid</code> (🟢) or <code>invalid</code> (🔴)</p>
<p><img alt="" src="../img/datasets_status.png" /></p>
<p>The dataset will always be <code>valid</code> as long as the policy, the group <em>AND</em> the sink linked to it exist in Orb. If the policy, the group <em>OR</em> the sink is removed from Orb, the dataset will become <code>invalid</code>. Note, in the image above, that the invalid dataset does not contain the group listed, as it has been removed from the Orb.</p>
<h4 id="sinks-status">Sinks Status<a class="headerlink" href="#sinks-status" title="Permanent link">&para;</a></h4>
<p>🟠 <code>Unknown</code> - No metrics have ever been published to this sink</p>
<p>🟢 <code>Active</code> - Metrics are actively being published to this sink</p>
<p>⚪ <code>Idle</code> - The last metrics published to this sink were more than 5 minutes ago</p>
<p>🔴 <code>Error</code>  - The sink tried to publish the metrics but failed. <strong>Attention: In this case, check that the sink credentials are configured correctly.</strong></p>
<p><img alt="" src="../img/sink_status.png" /></p>
<h3 id="visualize-and-alert-on-your-metrics">Visualize and alert on your metrics<a class="headerlink" href="#visualize-and-alert-on-your-metrics" title="Permanent link">&para;</a></h3>
<ol>
<li>Your agent should now be running the policy you created. After one minute of collection time, the metrics will be sent to your Prometheus sink.</li>
<li>You may use standard tools for visualizing and alerting on your Prometheus metrics. A popular option is <a href="https://grafana.com">Grafana</a>.</li>
<li>A pre-made dashboard for visualizing Orb/pktvisor metrics is <a href="https://grafana.com/grafana/dashboards/14221">available for import here</a>.
<img alt="" src="../img/grafana_dash.png" /></li>
</ol>
<h2 id="running-orb-agent">Running Orb Agent<a class="headerlink" href="#running-orb-agent" title="Permanent link">&para;</a></h2>
<p>An Orb agent needs to run on all the infrastructure (computers, servers, switches, VMs, k8s, etc.) to be monitored. It is a small, lightweight Docker process with an embedded <a href="https://pktvisor.dev">pktvisor agent</a> which connects into the Orb control plane to receive policies and send its metric output.</p>
<p>To run an agent, you will need:</p>
<ol>
<li>Docker, to run the agent image (<a href="https://hub.docker.com/repository/docker/ns1labs/orb-agent">ns1labs/orb-agent:develop</a>)</li>
<li><a href="#agent-credentials">Agent Credentials</a>, which are provided to you by the Orb UI or REST API after <a href="/docs/#create-an-agent">creating an agent</a></li>
<li>The Orb Control Plane host address (e.g. <code>localhost</code> or <code>orb.live</code>)</li>
<li>The network interface to monitor (e.g. <code>eth0</code>)</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are unsure which network interface to monitor, you may list the available interfaces on your host. Note that to allow 
the agent access to these interfaces, you must run the container with <code>--net=host</code></p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Linux</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>ip -stats -color -human addr
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">OSX</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>ifconfig
</code></pre></div>
</div>
</div>
</div>
<h3 id="agent-credentials">Agent credentials<a class="headerlink" href="#agent-credentials" title="Permanent link">&para;</a></h3>
<p>The agent credentials include <em>three pieces of information</em>, each of which is a UUID in the form <code>5dc34ded-6a53-44c0-8d15-7e9c8c95391a</code>.</p>
<ol>
<li><strong>Agent ID</strong>, which uniquely identifies the agent.</li>
<li><strong>Agent Channel ID</strong>, which uniquely identifies the agent's communication channel.</li>
<li><strong>Agent Key</strong>, which is a private access token for the agent. Note you will only be shown the key once upon creation!</li>
</ol>
<h3 id="sample-provisioning-commands">Sample provisioning commands<a class="headerlink" href="#sample-provisioning-commands" title="Permanent link">&para;</a></h3>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set" data-tabs="2:5"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Generic</label><div class="tabbed-content">
<p>Use this command as a template by substituting in the appropriate values:</p>
<div class="highlight"><pre><span></span><code>docker run -d --net<span class="o">=</span>host
-e <span class="nv">ORB_CLOUD_ADDRESS</span><span class="o">=</span>&lt;HOST&gt;
-e <span class="nv">ORB_CLOUD_MQTT_ID</span><span class="o">=</span>&lt;AGENTID&gt;
-e <span class="nv">ORB_CLOUD_MQTT_CHANNEL_ID</span><span class="o">=</span>&lt;CHANNELID&gt;
-e <span class="nv">ORB_CLOUD_MQTT_KEY</span><span class="o">=</span>&lt;AGENTKEY&gt;
-e <span class="nv">PKTVISOR_PCAP_IFACE_DEFAULT</span><span class="o">=</span>mock
ns1labs/orb-agent:develop
</code></pre></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">localhost, mock</label><div class="tabbed-content">
<p>This command is useful for connecting to a local develop environment, perhaps running on <a href="/install/#orb-with-docker-compose">Docker compose</a>. 
Note that the "mock" interface will generate random traffic rather than observe real traffic.</p>
<div class="highlight"><pre><span></span><code>docker run -d --net<span class="o">=</span>host
-e <span class="nv">ORB_CLOUD_ADDRESS</span><span class="o">=</span>localhost
-e <span class="nv">ORB_CLOUD_MQTT_ID</span><span class="o">=</span>7fb96f61-5de1-4f56-99d6-4eb8b43f8bad
-e <span class="nv">ORB_CLOUD_MQTT_CHANNEL_ID</span><span class="o">=</span>3e60e85d-4414-44d9-b564-0c1874898a4d
-e <span class="nv">ORB_CLOUD_MQTT_KEY</span><span class="o">=</span>44e42d90-aaef-45de-9bc2-2b2581eb30b3
-e <span class="nv">PKTVISOR_PCAP_IFACE_DEFAULT</span><span class="o">=</span>mock
-e <span class="nv">ORB_TLS_VERIFY</span><span class="o">=</span><span class="nb">false</span>
ns1labs/orb-agent:develop
</code></pre></div>
</div>
<input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><label for="__tabbed_2_3">orb.live, eth0</label><div class="tabbed-content">
<p>This command is similar to one you would use on the orb.live SaaS platform</p>
<div class="highlight"><pre><span></span><code>docker run -d --net<span class="o">=</span>host
-e <span class="nv">ORB_CLOUD_ADDRESS</span><span class="o">=</span>orb.live
-e <span class="nv">ORB_CLOUD_MQTT_ID</span><span class="o">=</span>7fb96f61-5de1-4f56-99d6-4eb8b43f8bad
-e <span class="nv">ORB_CLOUD_MQTT_CHANNEL_ID</span><span class="o">=</span>3e60e85d-4414-44d9-b564-0c1874898a4d
-e <span class="nv">ORB_CLOUD_MQTT_KEY</span><span class="o">=</span>44e42d90-aaef-45de-9bc2-2b2581eb30b3
-e <span class="nv">PKTVISOR_PCAP_IFACE_DEFAULT</span><span class="o">=</span>eth0
ns1labs/orb-agent:develop
</code></pre></div>
</div>
<input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><label for="__tabbed_2_4">You may want to run more than one agent on the same node and for that you must specify different pktvisor control ports for them, since the containers run in host networking mode, only one is allowed to run per port. By default, the pktvisor control port runs on port <em>10853</em>, but this value can be set through the environment variable <code>ORB_BACKENDS_PKTVISOR_API_PORT</code></label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run -d --net<span class="o">=</span>host
-e <span class="nv">ORB_CLOUD_ADDRESS</span><span class="o">=</span>orb.live
-e <span class="nv">ORB_CLOUD_MQTT_ID</span><span class="o">=</span>7fb96f61-5de1-4f56-99d6-4eb8b43f8bad
-e <span class="nv">ORB_CLOUD_MQTT_CHANNEL_ID</span><span class="o">=</span>3e60e85d-4414-44d9-b564-0c1874898a4d
-e <span class="nv">ORB_CLOUD_MQTT_KEY</span><span class="o">=</span>44e42d90-aaef-45de-9bc2-2b2581eb30b3
-e <span class="nv">PKTVISOR_PCAP_IFACE_DEFAULT</span><span class="o">=</span>eth0
-e <span class="nv">ORB_BACKENDS_PKTVISOR_API_PORT</span><span class="o">=</span><span class="m">10854</span>
ns1labs/orb-agent:develop
</code></pre></div>
</div>
<input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><label for="__tabbed_2_5">🎁 BONUS - you can access agent debug logs by passing the -d command</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run -d --net<span class="o">=</span>host
-e <span class="nv">ORB_CLOUD_ADDRESS</span><span class="o">=</span>orb.live
-e <span class="nv">ORB_CLOUD_MQTT_ID</span><span class="o">=</span>7fb96f61-5de1-4f56-99d6-4eb8b43f8bad
-e <span class="nv">ORB_CLOUD_MQTT_CHANNEL_ID</span><span class="o">=</span>3e60e85d-4414-44d9-b564-0c1874898a4d
-e <span class="nv">ORB_CLOUD_MQTT_KEY</span><span class="o">=</span>44e42d90-aaef-45de-9bc2-2b2581eb30b3
-e <span class="nv">PKTVISOR_PCAP_IFACE_DEFAULT</span><span class="o">=</span>eth0
ns1labs/orb-agent:develop run -d
</code></pre></div>
</div>
</div>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Is the agent Docker image not starting correctly? Do you have a specific use case? Have you found a bug? Come talk to us <a href="https://join.slack.com/t/ns1labs/shared_invite/zt-qqsm5cb4-9fsq1xa~R3h~nX6W0sJzmA">live on Slack</a>,
or <a href="https://github.com/ns1labs/orb/issues/new/choose">file a GitHub issue here</a>.</p>
</div>
<h3 id="configuration-files">Configuration files<a class="headerlink" href="#configuration-files" title="Permanent link">&para;</a></h3>
<p>Most configuration options can be passed to the container as environment variables, but there are some situations that require a configuration file.</p>
<p>You will need to use a configuration file if:</p>
<ul>
<li>You want to assign tags to the agent at the edge</li>
<li>You want to setup custom pktvisor Taps</li>
<li>You want the agent to <a href="#advanced-auto-provisioning-setup">auto-provision</a></li>
</ul>
<p>The configuration file is written in YAML. 
You can use the latest <a href="https://raw.githubusercontent.com/ns1labs/orb/develop/cmd/agent/agent.example.yaml">template configuration file</a> as a starting point, or
start here:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span><span class="w"></span>

<span class="c1"># this section is used by pktvisor</span><span class="w"></span>
<span class="c1"># see https://github.com/ns1labs/pktvisor/blob/develop/RFCs/2021-04-16-75-taps.md</span><span class="w"></span>
<span class="nt">visor</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">taps</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">default_pcap</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">input_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcap</span><span class="w"></span>
<span class="w">         </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">iface</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eth0&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">host_spec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.0.54/32,192.168.0.55/32,127.0.0.1/32&quot;</span><span class="w"></span>

<span class="c1"># this section is used orb-agent</span><span class="w"></span>
<span class="c1"># most sections and keys are optional</span><span class="w"></span>
<span class="nt">orb</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="c1"># these are arbitrary key value pairs used for organization in the control plane and UI</span><span class="w"></span>
<span class="w">   </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EU</span><span class="w"></span>
<span class="w">      </span><span class="nt">pop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ams02</span><span class="w"></span>
<span class="w">      </span><span class="nt">node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dns</span><span class="w"></span>
<span class="w">   </span><span class="nt">cloud</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="c1"># optionally specify an agent name to use during auto provisioning</span><span class="w"></span>
<span class="w">         </span><span class="c1"># hostname will be used if it&#39;s not specified here</span><span class="w"></span>
<span class="w">         </span><span class="nt">agent_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-agent1</span><span class="w"></span>
<span class="w">         </span><span class="nt">auto_provision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">      </span><span class="nt">api</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://orb.live</span><span class="w"></span>
<span class="w">         </span><span class="c1"># if auto provisioning, specify API token here (or pass on the command line)</span><span class="w"></span>
<span class="w">         </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TOKEN</span><span class="w"></span>
<span class="w">      </span><span class="nt">mqtt</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls://orb.live:8883</span><span class="w"></span>
<span class="w">         </span><span class="c1"># if not auto provisioning, specify agent connection details here</span><span class="w"></span>
<span class="w">         </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AGENT_UUID&quot;</span><span class="w"></span>
<span class="w">         </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AGENT_KEY_UUID&quot;</span><span class="w"></span>
<span class="w">         </span><span class="nt">channel_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;AGENT_CHANNEL_UUID&quot;</span><span class="w"></span>
<span class="w">   </span><span class="nt">backends</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">pktvisor</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">binary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/local/sbin/pktvisord&quot;</span><span class="w"></span>
<span class="w">      </span><span class="c1"># this example assumes the file is saved as agent.yaml. If your file has another name, you must replace it with the proper name</span><span class="w"></span>
<span class="w">      </span><span class="nt">config_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/local/orb/etc/agent.yaml&quot;</span><span class="w"></span>
</code></pre></div>
<p>You must mount your configuration file into the <code>orb-agent</code> container. For example, if your configuration file
is on the host at <code>/local/orb/agent.yaml</code>, you can mount it into the container with this command:</p>
<div class="highlight"><pre><span></span><code>docker run -v /local/orb:/usr/local/orb/ --net<span class="o">=</span>host <span class="se">\</span>
      ns1labs/orb-agent:develop run -c /usr/local/orb/agent.yaml
</code></pre></div>
<h3 id="advanced-auto-provisioning-setup">Advanced auto-provisioning setup<a class="headerlink" href="#advanced-auto-provisioning-setup" title="Permanent link">&para;</a></h3>
<p>Some use cases require a way to provision agents directly on edge infrastructure without creating an agent manually in the UI or REST API ahead of time. To do so, you will need to create an API key which can be used by <code>orb-agent</code> to provision itself.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Auto-provisioning is an advanced use case. Most users will find <a href="/docs/#create-an-agent">creating an agent in the UI</a> easier.</p>
</div>
<ol>
<li>
<p>If you have not already done so, register a new account with an email address and password at https://HOST/auth/register.</p>
</li>
<li>
<p>Create a <code>SESSION_TOKEN</code> with the <code>EMAIL_ADDRESS</code> and <code>PASSWORD</code> from registration:</p>
<div class="highlight"><pre><span></span><code>curl --location --request POST &#39;https://HOST/api/v1/tokens&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
&quot;email&quot;: &quot;&lt;EMAIL_ADDRESS&gt;&quot;,
&quot;password&quot;: &quot;&lt;PASSWORD&gt;&quot;
}&#39;
</code></pre></div>
</li>
<li>
<p>The output from creating a session token looks like this:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;token&quot;: &quot;SESSION_TOKEN&quot;
}
</code></pre></div>
</li>
<li>
<p>Because session tokens expire after 24 hours, you can create a permanent API token for agent provisioning by using the <code>SESSION_TOKEN</code> above:</p>
<div class="highlight"><pre><span></span><code>curl --location --request POST &#39;https://HOST/api/v1/keys&#39; \
--header &#39;Authorization: &lt;SESSION_TOKEN&gt;&#39; \
--header &#39;Content-Type: application/json&#39; \
--data-raw &#39;{
&quot;type&quot;: 2
}&#39;
</code></pre></div>
</li>
<li>
<p>The output from creating a <code>PERMANENT_TOKEN</code> looks like the following. Please take note of the <code>id</code> (used later to revoke) and the <code>value</code> (the permanent API token):</p>
<div class="highlight"><pre><span></span><code>{
    &quot;id&quot;: &quot;710c6a92-b463-42ec-bf24-8ae24eb13081&quot;,
    &quot;value&quot;: &quot;PERMANENT_TOKEN&quot;,
    &quot;issued_at&quot;: &quot;2021-09-07T15:29:49.70146088Z&quot;
}
</code></pre></div>
</li>
<li>
<p><strong>Currently, the permanent token allows access to all API functionality, not just provisioning.</strong> You can revoke this permanent token at any time with the following call, using the <code>id</code> field above:</p>
<div class="highlight"><pre><span></span><code>curl --location --request DELETE &#39;HOST:80/api/v1/keys/&lt;PERMANENT_TOKEN_ID&gt;&#39; \
--header &#39;Authorization: &lt;SESSION_TOKEN&gt;&#39;
</code></pre></div>
</li>
<li>
<p>Create a config for Orb and pktvisor taps, for example, <code>/local/orb/agent.yaml</code>:
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span><span class="w"></span>

<span class="nt">visor</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">taps</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">ethernet</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">input_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pcap</span><span class="w"></span>
<span class="w">         </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">iface</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eth0&quot;</span><span class="w"></span>

<span class="nt">orb</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">db</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/usr/local/orb/orb-agent.db</span><span class="w"></span>
<span class="w">   </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EU</span><span class="w"></span>
<span class="w">      </span><span class="nt">pop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ams02</span><span class="w"></span>
<span class="w">      </span><span class="nt">node_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dns</span><span class="w"></span>
<span class="w">   </span><span class="nt">cloud</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">agent_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myagent1</span><span class="w"></span>
<span class="w">      </span><span class="nt">api</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://HOST</span><span class="w"></span>
<span class="w">      </span><span class="nt">mqtt</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tls://HOST:8883</span><span class="w"></span>
</code></pre></div></p>
</li>
<li>
<p>You can now pull and run <code>ns1labs/orb-agent:develop</code> to auto-provision, substituting in the <code>PERMANENT_TOKEN</code> and optionally configuring agent name and Orb tags. If you don't set the agent name, it will attempt to use a hostname. You must mount the directory to save the agent state database and the config file:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code>docker pull ns1labs/orb-agent:develop
docker run -v /local/orb:/usr/local/orb/ --net<span class="o">=</span>host <span class="se">\</span>
       -e <span class="nv">ORB_CLOUD_API_TOKEN</span><span class="o">=</span>&lt;PERMANENT_TOKEN&gt; <span class="se">\</span>
      ns1labs/orb-agent:develop run -c /usr/local/orb/agent.yaml
</code></pre></div>
<h2 id="working-with-api-docs">Working with API Docs<a class="headerlink" href="#working-with-api-docs" title="Permanent link">&para;</a></h2>
<p>Follow the links below for API documentation of each respective Orb microservice:</p>
<ul>
<li><a href="https://orb.community/api/fleet.html">Fleet</a></li>
<li><a href="https://orb.community/api/policies.html">Policies</a></li>
<li><a href="https://orb.community/api/sinks.html">Sinks</a></li>
</ul>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../install/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../contact/" class="md-footer__link md-footer__link--next" aria-label="Next: Community" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Community
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 <a href="https://ns1.com/labs">NS1</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/ns1labs/orb" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://hub.docker.com/r/ns1labs" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://join.slack.com/t/ns1labs/shared_invite/zt-qqsm5cb4-9fsq1xa~R3h~nX6W0sJzmA" target="_blank" rel="noopener" title="join.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    <a href="mailto:info@pktvisor.dev" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M1.75 3A1.75 1.75 0 0 0 0 4.75v14c0 .966.784 1.75 1.75 1.75h20.5A1.75 1.75 0 0 0 24 18.75v-14A1.75 1.75 0 0 0 22.25 3H1.75zM1.5 4.75a.25.25 0 0 1 .25-.25h20.5a.25.25 0 0 1 .25.25v.852l-10.36 7a.25.25 0 0 1-.28 0l-10.36-7V4.75zm0 2.662V18.75c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V7.412l-9.52 6.433c-.592.4-1.368.4-1.96 0L1.5 7.412z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.suggest"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>